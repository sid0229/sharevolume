<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loading Entity Data...</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"><style>:root{--primary-color:#007bff;--accent-color:#6c757d;--text-color:#343a40;--bg-color:#f8f9fa;--card-bg:#ffffff}body{font-family:'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji'}h1,h2,h3,h4,h5,h6{color:var(--text-color)}.bg-primary{background-color:var(--primary-color)}.text-primary{color:var(--primary-color)}.border-primary{border-color:var(--primary-color)}.hover\:bg-primary:hover{background-color:var(--primary-color)}.shadow-custom{box-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}#loading-spinner{border-top-color:var(--primary-color);-webkit-animation:spinner 1s linear infinite;animation:spinner 1s linear infinite}@-webkit-keyframes spinner{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style></head><body class="bg-gray-100 text-gray-800 antialiased min-h-screen flex flex-col"><div class="container mx-auto p-4 flex-grow"><header class="text-center py-8 mb-8 bg-white shadow-sm rounded-lg"><h1 id="main-title" class="text-4xl font-extrabold text-gray-800 mb-2 leading-tight">Loading Entity Shares Data...</h1><p id="share-entity-name" class="text-lg text-gray-600">Fetching details...</p></header><main class="grid grid-cols-1 md:grid-cols-2 gap-6"><section class="bg-white shadow-custom rounded-lg p-8 transform transition duration-300 hover:scale-105"><h2 class="text-2xl font-bold text-gray-700 mb-4 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>Maximum Shares Outstanding</h2><p class="text-gray-500 mb-2">Fiscal Year: <span id="share-max-fy" class="font-semibold text-gray-700">...</span></p><p class="text-4xl font-extrabold text-green-600" id="share-max-value">...</p></section><section class="bg-white shadow-custom rounded-lg p-8 transform transition duration-300 hover:scale-105"><h2 class="text-2xl font-bold text-gray-700 mb-4 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path></svg>Minimum Shares Outstanding</h2><p class="text-gray-500 mb-2">Fiscal Year: <span id="share-min-fy" class="font-semibold text-gray-700">...</span></p><p class="text-4xl font-extrabold text-red-600" id="share-min-value">...</p></section></main><div id="loading-state" class="text-center mt-12"><div id="loading-spinner" class="mx-auto w-16 h-16 border-4 rounded-full border-solid border-gray-200" style="border-top-color: #3B82F6;"></div><p class="mt-4 text-xl text-gray-600">Loading data, please wait...</p></div><div id="error-state" class="hidden text-center mt-12 p-8 bg-red-100 border border-red-400 text-red-700 rounded-lg"><h2 class="text-2xl font-bold mb-4">Error!</h2><p id="error-message" class="text-lg"></p><button onclick="location.reload()" class="mt-6 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition duration-150 ease-in-out">Retry</button></div></div><footer class="text-center p-6 mt-12 text-gray-500 text-sm"><p>&copy; 2024 Stock Shares Outstanding Viewer. Data from SEC EDGAR API.</p><p>Note: Custom User-Agent headers cannot be set from client-side JavaScript for cross-origin requests. The browser's default User-Agent is used. For production or consistent API access, a server-side proxy is recommended.</p></footer><script>document.addEventListener('DOMContentLoaded', () => {const defaultCik = '0001551152'; // AbbVie CIKconst secApiBaseUrl = 'https://data.sec.gov/api/xbrl/companyconcept/CIK';const entityNameEl = document.getElementById('share-entity-name');const maxValEl = document.getElementById('share-max-value');const maxFyEl = document.getElementById('share-max-fy');const minValEl = document.getElementById('share-min-value');const minFyEl = document.getElementById('share-min-fy');const mainTitleEl = document.getElementById('main-title');const loadingState = document.getElementById('loading-state');const errorState = document.getElementById('error-state');const errorMessageEl = document.getElementById('error-message');const displayLoading = (show) => {loadingState.classList.toggle('hidden', !show);mainTitleEl.classList.toggle('hidden', show);entityNameEl.classList.toggle('hidden', show);document.querySelector('main').classList.toggle('hidden', show);errorState.classList.add('hidden');};const displayError = (message) => {errorState.classList.remove('hidden');errorMessageEl.textContent = message;loadingState.classList.add('hidden');mainTitleEl.textContent = 'Error Loading Data';entityNameEl.textContent = 'Please try again.';document.querySelector('main').classList.add('hidden');};const getCurrentCik = () => {const params = new URLSearchParams(window.location.search);return params.get('CIK') || defaultCik;};const formatNumber = (num) => {if (typeof num !== 'number') return String(num);return num.toLocaleString('en-US');};const fetchData = async (cik) => {const url = `${secApiBaseUrl}${cik}/dei/EntityCommonStockSharesOutstanding.json`;try {const response = await fetch(url);if (!response.ok) {if (response.status === 403) {throw new Error(`Access Denied (403). The SEC API may require a specific User-Agent or rate limits may apply. Try again or consider a proxy.`);} else {throw new Error(`HTTP error! Status: ${response.status}`);}}return await response.json();} catch (error) {console.error('Error fetching data:', error);throw new Error(`Failed to fetch data: ${error.message}. Please check the CIK and your network connection.`);}};const processData = (data) => {if (!data || !data.entityName || !data.units || !data.units.shares) {throw new Error('Invalid data structure received from SEC API.');}const entityName = data.entityName;const filteredShares = data.units.shares.filter(s => typeof s.val === 'number' && s.fy && parseInt(s.fy) > 2020);if (filteredShares.length === 0) {throw new Error('No relevant stock shares data found after filtering (FY > 2020 with numeric values).');}let max = { val: -Infinity, fy: '' };let min = { val: Infinity, fy: '' };filteredShares.forEach(s => {if (s.val > max.val) {max = { val: s.val, fy: s.fy };}if (s.val < min.val) {min = { val: s.val, fy: s.fy };}});return { entityName, max, min };};const updateDOM = ({ entityName, max, min }) => {document.title = `${entityName} - Shares Outstanding`;mainTitleEl.textContent = `${entityName} Shares Outstanding`;entityNameEl.textContent = entityName;maxValEl.textContent = formatNumber(max.val);maxFyEl.textContent = max.fy;minValEl.textContent = formatNumber(min.val);minFyEl.textContent = min.fy;};const init = async () => {displayLoading(true);try {const cik = getCurrentCik();const rawData = await fetchData(cik);const processed = processData(rawData);updateDOM(processed);} catch (error) {displayError(error.message);} finally {displayLoading(false);}};init();});</script></body></html>